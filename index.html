<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Project Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Styles -->
    <style type="text/css">
      body {
        max-width: 40em;
        width: 88%;
        margin-left: auto;
        margin-right: auto;
      }

      label,
      input,
      textarea {
        width: 100%;
      }

      label {
        font-weight: bold;
      }

      input,
      textarea {
        margin-bottom: 2em;
      }

      textarea {
        height: 12em;
      }
    </style>
  </head>

  <body>
    <form id="autosave">
      <div>
        <label for="name">Name</label>
        <input type="text" id="name" />
      </div>

      <div>
        <label for="email">Email Address</label>
        <input type="email" id="email" />
      </div>

      <div>
        <label for="notes">Notes</label>
        <textarea id="notes"></textarea>
      </div>
    </form>

    <!-- Scripts -->
    <script>
      // Code goes here...
      let inputs = document.querySelectorAll("input, textarea");

      for (var i = 0; i < inputs.length; i++) {
        // Check for saved data in localStorage
        var saved = localStorage.getItem("formAutosaveData_" + inputs[i].id);
        if (!saved) continue;

        // Update the input value
        inputs[i].value = saved;
      }

      // save form data to localstorage
      document.addEventListener(
        "input",
        function(event) {
          // Get current data from localStorage
          var saved = localStorage.getItem("formAutosaveData");

          // If there's existing data, convert to an object
          // Otherwise, create a new one
          saved = saved ? JSON.parse(saved) : {};

          // Push field value to saved data object
          saved[event.target.id] = event.target.value;

          // Save data back down to localStorage
          localStorage.setItem("formAutosaveData", JSON.stringify(saved));
        },
        false
      );
    </script>
  </body>
</html>
